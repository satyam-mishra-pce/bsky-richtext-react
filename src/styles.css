/**
 * bsky-richtext-react — Structural CSS
 *
 * Import this file in your app for essential layout styles.
 * These rules define structure and positioning only — no colors,
 * fonts, or visual decoration. Override freely with your own styles.
 *
 * Usage:
 *   import 'bsky-richtext-react/styles.css'
 *
 * Class names reference (matching the default classNames objects):
 *
 *   RichTextDisplay:
 *     .bsky-richtext              — root <span>
 *     .bsky-mention               — @mention anchor
 *     .bsky-link                  — link anchor
 *     .bsky-tag                   — #hashtag anchor
 *
 *   RichTextEditor:
 *     .bsky-editor                — root wrapper <div>
 *     .bsky-editor-content        — ProseMirror editable area wrapper
 *     .bsky-editor-mention        — mention chip inside the editor
 *     .autolink                   — URL decoration span inside the editor
 *
 *   MentionSuggestionList (dropdown):
 *     .bsky-suggestions           — outer container
 *     .bsky-suggestion-item       — each suggestion row (<button>)
 *     .bsky-suggestion-item-selected — currently highlighted row
 *     .bsky-suggestion-avatar     — avatar wrapper
 *     .bsky-suggestion-avatar-img — <img> element
 *     .bsky-suggestion-avatar-placeholder — initial-letter fallback
 *     .bsky-suggestion-text       — text column (name + handle)
 *     .bsky-suggestion-name       — display name
 *     .bsky-suggestion-handle     — @handle
 *     .bsky-suggestion-empty      — "No results" message
 *
 * Visual styling guide:
 *   All class names above can be targeted directly in your CSS.
 *   Use generateClassNames() to append your own classes without
 *   removing the structural defaults.
 */

/* ─── RichTextDisplay ────────────────────────────────────────────────────── */

.bsky-richtext {
  /* Inline so the span respects the parent's flow and wraps naturally */
  display: inline;
  /* Allow long URLs and handles to break at word boundaries */
  word-break: break-word;
  overflow-wrap: break-word;
}

/* Facet anchors — stay inline, no block-level layout shift */
.bsky-mention,
.bsky-link,
.bsky-tag {
  display: inline;
}

/* ─── RichTextEditor ─────────────────────────────────────────────────────── */

.bsky-editor {
  /* Fill available width */
  display: block;
  width: 100%;
  box-sizing: border-box;
  /* Establish a positioning context for any absolutely-positioned children */
  position: relative;
}

/* The ProseMirror editable region wrapper */
.bsky-editor-content {
  display: block;
  width: 100%;
  box-sizing: border-box;
}

/* The ProseMirror editable region itself */
.bsky-editor .ProseMirror,
.bsky-editor-content .ProseMirror {
  display: block;
  width: 100%;
  box-sizing: border-box;
  /* Remove browser's default focus outline — consumers provide their own */
  outline: none;
  /* At least one line tall when empty, so clicks register */
  min-height: 1em;
}

/* Paragraphs — reset margin so consumers control spacing */
.bsky-editor .ProseMirror p,
.bsky-editor-content .ProseMirror p {
  margin: 0;
}

/* Placeholder — floated so it doesn't push content down */
.bsky-editor .ProseMirror p.is-editor-empty:first-child::before,
.bsky-editor-content .ProseMirror p.is-editor-empty:first-child::before {
  content: attr(data-placeholder);
  float: left;
  height: 0;
  pointer-events: none;
}

/* Mention chips inside the editor */
.bsky-editor-mention {
  display: inline;
}

/* URL decorations inside the editor */
.autolink {
  display: inline;
}

/* ─── Mention Suggestion Dropdown ───────────────────────────────────────── */

.bsky-suggestions {
  display: flex;
  flex-direction: column;
  box-sizing: border-box;
  /* Constrain height so very long lists don't overflow the viewport */
  max-height: 320px;
  overflow-y: auto;
}

.bsky-suggestion-item {
  /* Full-width button row */
  display: flex;
  flex-direction: row;
  align-items: center;
  width: 100%;
  box-sizing: border-box;
  cursor: pointer;
  /* Reset button element defaults */
  border: none;
  background: transparent;
  text-align: left;
  padding: 0;
  margin: 0;
  /* Prevent text selection on rapid clicks */
  user-select: none;
}

.bsky-suggestion-text {
  display: flex;
  flex-direction: column;
  flex: 1;
  min-width: 0; /* allow text to truncate */
  overflow: hidden;
}

.bsky-suggestion-name,
.bsky-suggestion-handle {
  display: block;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}

/* Avatar wrapper — fixed square, circular clip via consumer CSS */
.bsky-suggestion-avatar {
  display: flex;
  flex-shrink: 0;
  align-items: center;
  justify-content: center;
}

.bsky-suggestion-avatar-img {
  display: block;
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.bsky-suggestion-avatar-placeholder {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
}

.bsky-suggestion-empty {
  display: block;
  box-sizing: border-box;
}
